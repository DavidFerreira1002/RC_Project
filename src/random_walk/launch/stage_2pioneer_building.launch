<?xml version="1.0"?>
<launch>
  <master auto="start"/>
  <arg name="model" default="$(find p3dx_description)/urdf/pioneer3dx.xml"/>
  <param name="robot_description" textfile="$(arg model)" />

  <include file="$(find rc_simul_worlds)/launch/pioneers_stage.launch">
    <arg name="world" value="building" doc="worlds: building | isr_floor0"/>
    <arg name="n" value="2" doc="number of robots"/>
  </include>

 <!--- Run the map server -->
 <node name="map_server" pkg="map_server" type="map_server"
	args="$(find rc_simul_worlds)/maps/building/building.png 0.025" respawn="false"/>

  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find random_walk)/rviz_configs/stage_multi_p3dx_building.rviz"/>

<!-- BEGIN ROBOT 0 -->
<group ns="robot_0">
	  <arg name="prefix" value="robot_0"/>

<!--- load robot's URDF model -->
<include file="$(find p3dx_description)/launch/p3dx_description.launch">
	 <arg name="tf_prefix" value="$(arg prefix)" />
</include>

<include file="$(find random_walk)/launch/random_walk.launch" >
      <arg name="ns" value="$(arg prefix)/" />
</include> 
    
</group>
<!-- END ROBOT 0 -->


 <!-- BEGIN ROBOT 1 -->
<group ns="robot_1">
	<arg name="prefix" value="robot_1"/>

	<!--- load robot's URDF model -->
<include file="$(find p3dx_description)/launch/p3dx_description.launch">
	 <arg name="tf_prefix" value="$(arg prefix)" />
</include>

<include file="$(find random_walk)/launch/random_walk.launch" >
      <arg name="ns" value="$(arg prefix)/" />
</include> 

</group>
<!-- END ROBOT 1 -->

</launch>
